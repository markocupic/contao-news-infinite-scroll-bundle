!function(n){ContaoNewsInfiniteScroll=function(t,e){"use strict";let o=n.extend({scrollContainer:window,paginationNextLink:t.querySelector(".pagination .next > a.next"),paginationLastLink:t.querySelector(".pagination .last > a.last"),loadAllOnDomready:!1,showLoadMoreButton:!0,anchorPoint:t,bottomPixels:100,fadeInTime:400,onInitialize:function(n){},onXHRStart:function(n){},onXHRComplete:function(n,t,e){return n},onXHRFail:function(n,t){},onBeforeAppendCallback:function(n,t){},onAppendCallback:function(n,t){}},e||{}),i=this,r=t,a=null,l=null,s=[],c=!1,u=0,d=null;i.blnHasError=!1,i.currentUrl="",i.urlIndex=0,i.response="",i.loadMoreBtn=null,i.xhr=null,this.getOption=function(n){return void 0!==o[n]&&o[n]};const f=async function(){const n=r.getAttribute("id");if(!n)return void console.error("No css id defined for the news list container. Please add a css id to the news_infinite_list module in the contao backend.");const t={data:()=>({articles:"",blnLoadingInProcess:!1,showLoadMoreButton:!1}),methods:{load:function(n){h()}}};d=Vue.createApp(t).mount("#"+n)},h=async function(n=!1){if(!0===d.blnLoadingInProcess||!0===c)return;i.blnHasError=!1,i.currentUrl=s[i.urlIndex],!0===n&&(i.currentUrl=window.location.href);const t=await p();i.blnHasError=!1,i.response=o.onXHRComplete(t,i,i.xhr),n||i.urlIndex++,new Promise((n,t)=>{setTimeout(()=>{n()},1e3)}).then(n=>{s.length<=i.urlIndex?(c=!0,!0===o.showLoadMoreButton&&(d.showLoadMoreButton=!1),void 0!==u&&clearInterval(u)):!0===o.showLoadMoreButton&&(d.showLoadMoreButton=!0),d.blnLoadingInProcess=!1,g()})},p=async function(){try{if(o.onXHRStart(i),r.setAttribute("aria-busy","true"),d.blnLoadingInProcess=!0,d.showLoadMoreButton=!1,i.xhr=await fetch(i.currentUrl,{headers:{"x-requested-with":"XMLHttpRequest"}}),!i.xhr.ok)throw w(),new Error(`An error has occured: ${i.xhr.status}`);let n=await i.xhr.json();return n=o.onXHRComplete(n,i,i.xhr),r.setAttribute("aria-busy","false"),n}catch(n){throw w(),new Error(n)}},w=function(){d.blnLoadingInProcess=!1,r.setAttribute("aria-busy","false"),o.onXHRFail(i,i.xhr)},g=function(){o.onBeforeAppendCallback(i,i.xhr),""!==i.response.data&&(d.articles=d.articles+i.response.data),o.onAppendCallback(i,i.xhr)};!async function(){if(!o.onInitialize(i))return;if(!r)return;let n=r.getAttribute("id");if(n&&document.querySelectorAll("#"+n).length>1)alert('Aborted newslist infinite scroll initialization. Do not use multiple "newslist infinite scroll" modules with the same CSS ID on the same page.');else{if(o.paginationNextLink||console.log("Warning! Could not find a newslist pagination during the newslist infinite scroll initialization. Enable the pagination in the newslist infinite scroll module settings in the contao backend."),o.paginationNextLink){const n=o.paginationNextLink.getAttribute("href"),t="page_n(\\d*)=(\\d*)",e=new RegExp(t,"g"),i=e.exec(n);if(!i)return void console.error(`News infinite scroll initialization aborted! Could not find pagination link with pattern ${t}.`);const r=i[1],a=parseInt(i[2]);let l,c=a;if(o.paginationLastLink){const n=o.paginationLastLink.getAttribute("href"),e=new RegExp(t,"g").exec(n);e&&(c=parseInt(e[2]))}for(l=a;l<=c;l++){const t=n.replace(e,"page_n"+r+"="+l);s.push(t)}}(l=o.scrollContainer)?(0===o.bottomPixels&&(o.bottomPixels=1),a=r,o.anchorPoint&&(a=o.anchorPoint),await f(),await h(!0),!0===o.loadAllOnDomready?(o.showLoadMoreButton=!1,h(),u=setInterval(h,3e3)):!1===o.showLoadMoreButton&&l.addEventListener("scroll",function(){let n=window===l?l.scrollY:l.scrollTop,t=window===l?l.innerHeight:l.offsetHeight;Math.floor(n)>a.offsetTop+a.offsetHeight-t-o.bottomPixels&&h()})):console.error("ContaoNewsInfiniteScroll aborted! Please select a valid scroll container.")}}()}}(jQuery);