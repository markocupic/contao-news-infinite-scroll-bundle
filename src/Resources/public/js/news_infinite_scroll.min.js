!function(n){ContaoNewsInfiniteScroll=function(e){"use strict";let o=n.extend({newsContainer:".mod_newslist_infinite_scroll",scrollContainer:n(window),paginationNextLink:".pagination .next > a.next",paginationLastLink:".pagination .last > a.last",loadAllOnDomready:!1,loadMoreButton:!0,loadMoreButtonMarkup:'<div class="inf-scr-load-more-btn-container text-center"><button class="btn btn-primary w-100"><?= $GLOBALS["TL_LANG"]["MSC"]["infScrLoadMore"] ?></button></div>',anchorPoint:".mod_newslist_infinite_scroll",bottomPixels:100,fadeInTime:400,loadingInProcessContainer:'<div class="inf-scr-loading-in-process-container text-center"><i class="fa fa-5x fa-spinner fa-spin"></i>{{br}}{{br}}<?= $GLOBALS["TL_LANG"]["MSC"]["infScrLoadingInProcess"] ?>...</em></div>',onInitialize:function(n){},onXHRStart:function(n){},onXHRComplete:function(n,e,o){return n},onXHRFail:function(n,e){},onBeforeAppendCallback:function(n,e){},onAppendCallback:function(n,e){}},e||{}),t=this,i=null,r=null,a=null,l=0,s=[],c=0,d=0;t.blnHasError=!1,t.currentUrl="",t.urlIndex=0,t.response="",t.loadMoreBtn=null,t.xhr=null,this.getOption=function(n){return void 0!==o[n]&&o[n]};let f=function(){1!=l&&1!=c&&(t.blnHasError=!1,t.currentUrl=s[t.urlIndex],void 0!==t.currentUrl?t.xhr=n.ajax({url:t.currentUrl,beforeSend:function(){o.onXHRStart(t),n(i).attr("aria-busy","true"),l=1,""!=o.loadingInProcessContainer&&n(o.loadingInProcessContainer).addClass("inf-scr-loading-in-process-container").insertAfter(i).fadeIn(100)}}).done(function(n){t.blnHasError=!1,t.response=n,t.response=o.onXHRComplete(t.response,t,t.xhr),!1===t.blnHasError?(t.urlIndex++,setTimeout(function(){p()},1e3)):u()}).fail(function(){u()}).always(function(){setTimeout(function(){n(".inf-scr-loading-in-process-container").remove(),n(i).attr("aria-busy","false"),s.length==t.urlIndex&&(c=1,n(t.loadMoreBtn).length&&(t.loadMoreBtn.remove(),t.loadMoreBtn=null),void 0!==d&&clearInterval(d)),null!==t.loadMoreBtn&&t.loadMoreBtn.show(),l=0},1e3)}):(c=1,void 0!==d&&clearInterval(d)))},u=function(){l=0,o.onXHRFail(t,t.xhr)},p=function(){o.onBeforeAppendCallback(t,t.xhr),""!=t.response&&n(t.response).hide().appendTo(i).fadeIn(o.fadeInTime),o.onAppendCallback(t,t.xhr)};!function(){if(!0===o.onInitialize(t)&&void 0!==(i=n(o.newsContainer)[0])&&0!==n(o.newsContainer+" "+o.paginationNextLink).length){if(n(o.newsContainer+" "+o.paginationNextLink).length){let e=n(o.newsContainer+" "+o.paginationNextLink).first(),t=n(e).prop("href"),i="page_n(\\d*)=(\\d*)",r=new RegExp(i,"g"),a=r.exec(t);if(!a)return void console.error('News infinite scroll initialization aborted! Could not find pagination link with pattern "'+i+'".');let l=a[1],c=parseInt(a[2]),d=c;if(n(o.newsContainer+" "+o.paginationLastLink).length>0){let e=n(o.newsContainer+" "+o.paginationLastLink).first(),t=n(e).prop("href"),r=new RegExp(i,"g").exec(t);r&&(d=parseInt(r[2]))}for(let n=c;n<=d;n++){let e=t.replace(r,"page_n"+l+"="+n);s.push(e)}}void 0!==(a=n(o.scrollContainer)[0])?(0==o.bottomPixels&&(o.bottomPixels=1),r=n(i),void 0!==n(o.anchorPoint)[0]&&(r=n(o.anchorPoint)[0]),!0===o.loadAllOnDomready?(f(),d=setInterval(f,3e3)):!0===o.loadMoreButton?(t.loadMoreBtn=n(o.loadMoreButtonMarkup),t.loadMoreBtn.insertAfter(i),t.loadMoreBtn.addClass("inf-scr-load-more-btn-container"),t.loadMoreBtn.click(function(e){n(this).hide(),f()})):n(a).on("scroll",function(){n(a).scrollTop()>n(r).offset().top+n(r).innerHeight()-n(a).height()-o.bottomPixels&&f()})):console.error("ContaoNewsInfiniteScroll aborted! Please select a valid scroll container.")}}()}}(jQuery);